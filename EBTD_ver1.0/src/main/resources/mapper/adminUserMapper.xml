<?xml version="1.0" encoding="UTF-8"?>

<!-- 김아름 -->
<!-- UserDAO 전용 Mapper: user관리 sql문 명시 -->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ebtd.www.dao.I_AdminUserDao">

	                <!-- mybatis-config.xml에 별칭설정 or Bean에 @Alias("user") -->
	<select id="getUserList" resultType="user">
		SELECT * FROM U
	</select>
	
	<select id="getUserSearchUserName" resultType="user">
		SELECT * FROM U WHERE U_USERNAME  LIKE '%'||#{u_userName}||'%'
	</select>
	
	<select id="getUserSearchUType" resultType="user">
		SELECT * FROM U WHERE U_TYPE=#{'u_type'}
	</select>
	
	<select id="getUserDetail" resultType="user">
		SELECT * FROM U WHERE U_USERNAME=#{'u_userName'}
	</select>
	
	<select id="getUserHistoryList" resultType="userReserveHistory">
		SELECT URH.URH_NO, URH.U_USERNAME, URH.B_NO,B.C_USERNAME, URH.URH_DATE, URH.S_NOSTART, URH.S_NOLAST,URH.URH_STATE, U.U_TYPE
		FROM URH 
		LEFT JOIN B ON URH.B_NO = B.B_NO
		LEFT JOIN U ON U.U_USERNAME = URH.U_USERNAME
	</select>
	
	<select id="getUserHistoryDateList" resultType="userReserveHistory">
		SELECT URH.URH_NO, URH.U_USERNAME, URH.B_NO,B.C_USERNAME, URH.URH_DATE, URH.S_NOSTART, URH.S_NOLAST,URH.URH_STATE, U.U_TYPE
		FROM URH 
		LEFT JOIN B ON URH.B_NO = B.B_NO
		LEFT JOIN U ON U.U_USERNAME = URH.U_USERNAME
 		WHERE URH_DATE BETWEEN SYSDATE-#{period} AND SYSDATE
	</select>
	
	<select id="getUserHistoryUserName" resultType="userReserveHistory">
		SELECT URH.URH_NO, URH.U_USERNAME, URH.B_NO,B.C_USERNAME, URH.URH_DATE, URH.S_NOSTART, URH.S_NOLAST,URH.URH_STATE, U.U_TYPE
		FROM URH 
		LEFT JOIN B ON URH.B_NO = B.B_NO
		LEFT JOIN U ON U.U_USERNAME = URH.U_USERNAME
 		WHERE U.U_USERNAME  LIKE '%'||#{u_userName}||'%'
 	</select>
	

</mapper>
